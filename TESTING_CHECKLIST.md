# 测试检查清单 (Testing Checklist)

本文档提供完整的测试检查清单，确保应用在部署前所有功能正常工作。

## 📋 测试环境准备

### 本地测试环境

```bash
# 1. 构建项目
npm run build

# 2. 启动本地服务器
npx serve out

# 3. 在浏览器中打开
# http://localhost:3000
```

### 测试浏览器

- [ ] Chrome 90+
- [ ] Firefox 88+
- [ ] Safari 14+（Mac）
- [ ] Edge 90+

### 测试设备

- [ ] 桌面端（1920x1080）
- [ ] 笔记本（1366x768）
- [ ] 平板（768x1024）
- [ ] 手机（375x667）

## ✅ 功能测试清单

### 1. 首页测试

#### 页面加载
- [ ] 页面正常加载，无白屏
- [ ] 导航栏显示正确
- [ ] Hero 区域显示正确
- [ ] 三步流程卡片显示正确
- [ ] 所有图标和图片加载正常

#### 导航功能
- [ ] 点击"案例馆"跳转正确
- [ ] 点击"研究工坊"跳转正确
- [ ] 点击设置图标打开 API 配置对话框
- [ ] Logo 点击返回首页

#### 响应式设计
- [ ] 移动端布局正常
- [ ] 平板端布局正常
- [ ] 桌面端布局正常

### 2. 案例馆测试

#### 页面显示
- [ ] 案例馆页面正常加载
- [ ] 学科筛选标签显示正确（数学、物理、语文、英语）
- [ ] 案例卡片网格布局正确
- [ ] 每个案例卡片显示：标题、标签、作者、点赞数

#### 筛选功能
- [ ] 点击"数学"显示数学案例
- [ ] 点击"物理"显示物理案例
- [ ] 点击"语文"显示语文案例
- [ ] 点击"英语"显示英语案例
- [ ] 默认显示所有案例

#### 案例卡片交互
- [ ] 鼠标悬停有动画效果
- [ ] 点击卡片跳转到案例详情页

#### 响应式设计
- [ ] 移动端单列布局
- [ ] 平板端双列布局
- [ ] 桌面端三列布局

### 3. 案例详情页测试

#### 页面显示
- [ ] 案例详情页正常加载
- [ ] 显示案例标题
- [ ] 显示案例描述
- [ ] 显示案例内容
- [ ] 显示"Fork 此研究"按钮

#### Fork 功能
- [ ] 点击"Fork 此研究"按钮
- [ ] 跳转到研究工坊
- [ ] 工坊中预填充案例信息
- [ ] 可以继续编辑和使用

#### 导航
- [ ] 返回按钮正常工作
- [ ] 面包屑导航正确

### 4. API 配置测试

#### 对话框显示
- [ ] 点击设置图标打开对话框
- [ ] 对话框居中显示
- [ ] 背景遮罩正确
- [ ] 关闭按钮正常工作

#### 表单字段
- [ ] Provider 下拉选择正常（deepseek/openai/custom）
- [ ] Base URL 输入框正常
- [ ] API Key 输入框正常（密码类型）
- [ ] Model 输入框正常

#### 表单验证
- [ ] 必填字段为空时显示错误
- [ ] Base URL 格式验证
- [ ] API Key 格式验证

#### 保存功能
- [ ] 点击"保存配置"成功
- [ ] 显示成功提示
- [ ] 配置保存到 localStorage
- [ ] 关闭对话框后配置保持

#### 警告信息
- [ ] 显示本地存储警告信息
- [ ] 警告信息样式正确（黄色背景）

### 5. 研究工坊 - 步骤 1（选题向导）

#### 页面布局
- [ ] 侧边栏显示四个步骤
- [ ] 步骤 1 处于激活状态
- [ ] 主内容区域显示表单

#### 表单字段
- [ ] 年级输入框正常
- [ ] 学科输入框正常
- [ ] 教学困惑文本区域正常
- [ ] 提交按钮正常

#### AI 生成功能
- [ ] 点击"生成题目"按钮
- [ ] 显示加载状态
- [ ] 成功生成 3 个题目
- [ ] 题目显示格式正确
- [ ] 每个题目有选择按钮

#### 题目选择
- [ ] 点击选择题目
- [ ] 题目高亮显示
- [ ] 可以切换选择
- [ ] 选择后可以进入下一步

#### 错误处理
- [ ] 未配置 API 时显示错误提示
- [ ] API 调用失败显示错误信息
- [ ] 显示重试按钮

### 6. 研究工坊 - 步骤 2（文献综述）

#### 页面显示
- [ ] 显示步骤 1 选择的题目
- [ ] 显示"生成文献综述"按钮
- [ ] 显示文本编辑区域

#### 生成功能
- [ ] 点击"生成文献综述"
- [ ] 显示加载状态
- [ ] 成功生成 500-800 字综述
- [ ] 综述显示在文本区域

#### 编辑功能
- [ ] 可以编辑生成的内容
- [ ] 编辑后内容保存
- [ ] 可以重新生成

#### 导航
- [ ] 可以返回步骤 1
- [ ] 可以进入步骤 3

### 7. 研究工坊 - 步骤 3（模拟课堂）

#### 页面布局
- [ ] 显示教案输入区域
- [ ] 显示学生画像选择器
- [ ] 显示聊天界面

#### 教案输入
- [ ] 可以输入教案
- [ ] 可以粘贴教案
- [ ] 教案内容保存

#### 学生画像选择
- [ ] 显示 A/B/C 三个画像
- [ ] 每个画像显示特征
- [ ] 可以选择画像
- [ ] 选择后显示画像详情
- [ ] 可以切换画像

#### 聊天功能
- [ ] 输入框正常工作
- [ ] 发送按钮正常
- [ ] 按 Enter 发送消息
- [ ] 用户消息显示正确（右侧，青色背景）
- [ ] AI 消息显示正确（左侧，米色背景，楷体字体）
- [ ] 流式响应正常工作
- [ ] 消息自动滚动到底部

#### 对话历史
- [ ] 对话历史保存
- [ ] 刷新页面后对话保持
- [ ] 可以查看历史消息

#### 改进建议功能
- [ ] 显示"效果不佳？"按钮
- [ ] 点击按钮打开对话框
- [ ] 显示 AI 分析
- [ ] 显示改进建议
- [ ] 可以关闭对话框

#### 错误处理
- [ ] API 调用失败显示错误
- [ ] 网络错误显示提示
- [ ] 可以重试发送

### 8. 研究工坊 - 步骤 4（成果导出）

#### 分析显示
- [ ] 显示雷达图
- [ ] 雷达图显示三个维度（认知负荷、参与度、理解度）
- [ ] 雷达图数据正确
- [ ] 雷达图样式正确（青色）

#### 分析报告
- [ ] 显示整体分析文本
- [ ] 显示改进建议
- [ ] 显示关键对话片段

#### PDF 导出
- [ ] 显示"下载 PDF 报告"按钮
- [ ] 点击按钮生成 PDF
- [ ] PDF 包含研究题目
- [ ] PDF 包含文献综述
- [ ] PDF 包含对话摘录
- [ ] PDF 包含雷达图
- [ ] PDF 包含分析结论
- [ ] PDF 格式正确
- [ ] PDF 可以正常打开

### 9. 会话管理测试

#### 自动保存
- [ ] 完成步骤 1 后自动保存
- [ ] 完成步骤 2 后自动保存
- [ ] 完成步骤 3 后自动保存
- [ ] 完成步骤 4 后自动保存

#### 会话列表
- [ ] 显示已保存的会话
- [ ] 显示会话标题
- [ ] 显示最后修改时间
- [ ] 显示当前步骤

#### 会话加载
- [ ] 点击会话加载数据
- [ ] 所有数据正确恢复
- [ ] 跳转到正确的步骤

#### 会话删除
- [ ] 显示删除按钮
- [ ] 点击删除显示确认对话框
- [ ] 确认后删除会话
- [ ] 会话从列表中移除

#### 会话持久化
- [ ] 刷新页面后会话保持
- [ ] 关闭浏览器后会话保持
- [ ] 重新打开浏览器会话保持

### 10. localStorage 测试

#### 数据存储
- [ ] API 配置保存到 localStorage
- [ ] 研究会话保存到 localStorage
- [ ] 对话历史保存到 localStorage

#### 数据加载
- [ ] 页面加载时读取 localStorage
- [ ] 配置正确恢复
- [ ] 会话正确恢复

#### 数据压缩
- [ ] 大型对话历史使用压缩
- [ ] 压缩后数据可以正确解压
- [ ] 压缩节省存储空间

#### 配额处理
- [ ] 检测 localStorage 配额
- [ ] 配额不足时显示警告
- [ ] 提供清理旧会话选项
- [ ] 自动清理 30 天以上会话

### 11. 错误处理测试

#### 网络错误
- [ ] 断网时显示错误提示
- [ ] 显示"网络连接失败"消息
- [ ] 显示重试按钮
- [ ] 重试功能正常

#### API 错误
- [ ] API Key 无效时显示错误
- [ ] 提示检查 API 配置
- [ ] 显示设置链接
- [ ] 点击链接打开配置对话框

#### 速率限制
- [ ] 达到速率限制时显示提示
- [ ] 显示剩余配额（如果可用）
- [ ] 建议配置自己的 API Key

#### 无效响应
- [ ] AI 返回无效格式时显示错误
- [ ] 提示重试
- [ ] 记录错误到控制台

### 12. 性能测试

#### 页面加载速度
- [ ] 首页加载时间 < 2 秒
- [ ] 案例馆加载时间 < 2 秒
- [ ] 工坊页面加载时间 < 2 秒

#### 交互响应
- [ ] 按钮点击响应 < 100ms
- [ ] 页面切换流畅
- [ ] 滚动流畅无卡顿

#### API 响应
- [ ] 选题生成 < 10 秒
- [ ] 文献生成 < 15 秒
- [ ] 学生对话响应 < 5 秒
- [ ] 流式响应实时显示

#### 内存使用
- [ ] 长时间使用无内存泄漏
- [ ] 多次对话后性能稳定
- [ ] 浏览器标签页内存 < 200MB

### 13. 响应式设计测试

#### 移动端（375x667）
- [ ] 导航栏适配正常
- [ ] 侧边栏转为底部抽屉
- [ ] 卡片单列布局
- [ ] 聊天界面全宽
- [ ] 按钮大小适合触摸
- [ ] 文字大小可读

#### 平板端（768x1024）
- [ ] 布局适配正常
- [ ] 卡片双列布局
- [ ] 侧边栏显示正常
- [ ] 聊天界面宽度合适

#### 桌面端（1920x1080）
- [ ] 布局居中
- [ ] 最大宽度限制正确
- [ ] 卡片三列布局
- [ ] 侧边栏固定显示

### 14. 浏览器兼容性测试

#### Chrome
- [ ] 所有功能正常
- [ ] 样式显示正确
- [ ] 性能良好

#### Firefox
- [ ] 所有功能正常
- [ ] 样式显示正确
- [ ] 性能良好

#### Safari
- [ ] 所有功能正常
- [ ] 样式显示正确
- [ ] 楷体字体显示正确

#### Edge
- [ ] 所有功能正常
- [ ] 样式显示正确
- [ ] 性能良好

### 15. 静态导出验证

#### 构建输出
- [ ] `npm run build` 成功
- [ ] 无 TypeScript 错误
- [ ] 无 ESLint 错误
- [ ] 生成 `out` 目录

#### 输出结构
- [ ] `out/index.html` 存在
- [ ] `out/cases/index.html` 存在
- [ ] `out/workshop/index.html` 存在
- [ ] `out/_next/static/` 存在
- [ ] `out/_redirects` 存在

#### 静态资源
- [ ] 所有 JS 文件存在
- [ ] 所有 CSS 文件存在
- [ ] 所有图片文件存在
- [ ] 字体文件存在

#### 路由测试
- [ ] 所有路由可访问
- [ ] 动态路由正确生成
- [ ] 404 页面正常工作

### 16. 部署后测试

#### Netlify 部署
- [ ] 部署成功
- [ ] 所有页面可访问
- [ ] API 调用正常（CORS）
- [ ] localStorage 正常工作
- [ ] 自定义域名正常（如果配置）

#### 生产环境功能
- [ ] 完整工作流程测试
- [ ] 从选题到导出 PDF
- [ ] 会话保存和恢复
- [ ] 多次使用稳定性

## 🔍 深度测试场景

### 场景 1: 完整研究流程

1. [ ] 打开应用，配置 API
2. [ ] 进入研究工坊
3. [ ] 步骤 1: 输入教学困惑，生成 3 个题目
4. [ ] 选择一个题目
5. [ ] 步骤 2: 生成文献综述
6. [ ] 编辑文献综述
7. [ ] 步骤 3: 输入教案
8. [ ] 选择学生画像 B
9. [ ] 进行 10 轮对话
10. [ ] 点击"效果不佳？"查看建议
11. [ ] 步骤 4: 查看分析结果
12. [ ] 下载 PDF 报告
13. [ ] 验证 PDF 内容完整

### 场景 2: 多会话管理

1. [ ] 创建第一个研究会话
2. [ ] 完成到步骤 2
3. [ ] 创建第二个研究会话
4. [ ] 完成到步骤 3
5. [ ] 切换回第一个会话
6. [ ] 验证数据正确恢复
7. [ ] 继续完成第一个会话
8. [ ] 删除第二个会话
9. [ ] 验证删除成功

### 场景 3: 错误恢复

1. [ ] 开始对话
2. [ ] 断开网络
3. [ ] 尝试发送消息
4. [ ] 验证错误提示
5. [ ] 恢复网络
6. [ ] 点击重试
7. [ ] 验证消息发送成功

### 场景 4: 长时间使用

1. [ ] 进行 50 轮对话
2. [ ] 验证性能稳定
3. [ ] 验证内存使用正常
4. [ ] 验证所有对话保存
5. [ ] 刷新页面
6. [ ] 验证对话历史恢复

### 场景 5: 跨浏览器测试

1. [ ] 在 Chrome 中创建会话
2. [ ] 完成到步骤 2
3. [ ] 导出会话数据（手动复制 localStorage）
4. [ ] 在 Firefox 中导入数据
5. [ ] 验证数据正确显示
6. [ ] 继续完成会话

## 📊 性能基准

### Lighthouse 分数目标

- **Performance**: > 90
- **Accessibility**: > 95
- **Best Practices**: > 95
- **SEO**: > 90

### 加载时间目标

- **First Contentful Paint**: < 1.5s
- **Largest Contentful Paint**: < 2.5s
- **Time to Interactive**: < 3.5s
- **Total Blocking Time**: < 300ms
- **Cumulative Layout Shift**: < 0.1

### 资源大小目标

- **Initial JS Bundle**: < 200KB (gzipped)
- **Initial CSS**: < 50KB (gzipped)
- **Total Page Size**: < 500KB
- **Number of Requests**: < 20

## 🐛 已知问题记录

在测试过程中发现的问题记录在这里：

| 问题 | 严重程度 | 状态 | 备注 |
|------|----------|------|------|
| 示例问题 | 低 | 已修复 | 描述 |

## ✅ 测试完成确认

测试完成后，请确认：

- [ ] 所有核心功能测试通过
- [ ] 所有浏览器兼容性测试通过
- [ ] 所有响应式设计测试通过
- [ ] 性能测试达到目标
- [ ] 部署后验证通过
- [ ] 无严重或高优先级 bug
- [ ] 文档已更新
- [ ] 准备好发布

## 📝 测试报告模板

```markdown
# 测试报告

**测试日期**: YYYY-MM-DD
**测试人员**: [姓名]
**测试环境**: [浏览器/设备]

## 测试结果

- 通过: X 项
- 失败: X 项
- 跳过: X 项

## 发现的问题

1. [问题描述]
   - 严重程度: [高/中/低]
   - 复现步骤: [步骤]
   - 预期结果: [描述]
   - 实际结果: [描述]

## 性能数据

- Lighthouse 分数: [分数]
- 首次加载时间: [时间]
- 交互时间: [时间]

## 建议

[改进建议]

## 结论

[是否可以发布]
```

---

**测试完成后，应用即可部署到生产环境！** 🚀
